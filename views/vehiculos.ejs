<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehículos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <div class="navbar">
        <div class="center-title" onclick="window.location.href='/'">Inicio</div>
        <div class="profile-section">
            <div class="title">Administrador</div>
            <div class="profile-icon"></div>
        </div>
    </div>
    <div class="sidebar">
        <div class="logo" onclick="window.location.href='/'"><i class="fa-sharp-duotone fa-solid fa-car-side"></i>Concesionaria Compitas</div>

        <div class="transacciones">
            <h3>Concesionaria</h3>
            <ul class="menu">
                <li class="menu-item"><i class="fas fa-home"></i><span onclick="window.location.href='/api/direccion'">Concesionarias</span></li>
                <li class="menu-item"><i class="fa-solid fa-car"></i><span onclick="window.location.href='/api/vehiculo'">Vehiculos</span></li>
                <li class="menu-item"><i class="fa-solid fa-paint-roller"></i><span onclick="window.location.href='/api/colores'">Colores Vehiculares</span></li>
                <li class="menu-item"><i class="fa-solid fa-car-on"></i><span onclick="window.location.href='/api/modelos'">Modelos</span></li>
                <li class="menu-item"><i class="fa-solid fa-users"></i><span>Empleados</span></li>
            </ul>
        </div>
        <div class="transacciones">
            <h3>Transacciones</h3>
            <ul class="menu">
                <li class="menu-item"><i class="fa-brands fa-sellsy"></i><span>Ventas</span></li>
                <li class="menu-item"><i class="fa-solid fa-money-bill"></i><span>Metodos de pago</span></li>
            </ul>
        </div>
    </div>
    <div class="content">
        <div class="card card-table">
            <h1>Vehículos</h1>
            <table border="1">
                <thead>
                    <tr>
                        <th>ID_V</th>
                        <th>VIN</th>
                        <th>MARCA ID</th>
                        <th>MODELO ID</th>
                        <th>ANIO</th>
                        <th>COLOR ID</th>
                        <th>TIPO ID</th>
                        <th>LINEA</th>
                        <th>TRANSMISION ID</th>
                        <th>PRECIO</th>
                        <th>ESTADO VEHICULO ID</th>
                        <th>FECHA INGRESO</th>
                        <th>NUM MOTOR</th>
                        <th>TIPO MOTOR ID</th>
                        <th>CAPACIDAD</th>
                        <th>CILINDROS</th>
                        <th>PUERTAS</th>
                        <th>PROVEEDOR ID</th>
                        <th class="no-border"></th>
                        <th class="no-border"></th>
                    </tr>
                </thead>
                <tbody>
                    <% data.forEach(row => { %>
                        <tr>
                            <td>
                                <%= row.ID_V %>
                            </td>
                            <td>
                                <%= row.VIN %>
                            </td>
                            <td>
                                <%= row.MARCA_ID %>
                            </td>
                            <td>
                                <%= row.MODELO_ID %>
                            </td>
                            <td>
                                <%= row.ANIO %>
                            </td>
                            <td>
                                <%= row.COLOR_ID %>
                            </td>
                            <td>
                                <%= row.TIPO_ID %>
                            </td>
                            <td>
                                <%= row.LINEA %>
                            </td>
                            <td>
                                <%= row.TRANSMISION_ID %>
                            </td>
                            <td>
                                <%= row.PRECIO %>
                            </td>
                            <td>
                                <%= row.ESTADO_V_ID %>
                            </td>
                            <td>
                                <%= new Date(row.FECHA_INGRESO).toISOString().split('T')[0] %>
                            </td>
                            <td>
                                <%= row.NUM_MOTOR %>
                            </td>
                            <td>
                                <%= row.TIPO_MOTOR_ID %>
                            </td>
                            <td>
                                <%= row.CAPACIDAD %>
                            </td>
                            <td>
                                <%= row.NUM_CILINDROS %>
                            </td>
                            <td>
                                <%= row.NUM_PUERTAS %>
                            </td>
                            <td>
                                <%= row.PROVEEDOR_ID_FK %>
                            </td>
                            <td class="no-border" style="text-align: center;">
                                <button class="table-button" onclick="fillEditForm('<%= row.ID_V %>', '<%= row.VIN %>', '<%= row.MARCA_ID %>', '<%= row.MODELO_ID %>', '<%= row.ANIO %>', '<%= row.COLOR_ID %>', '<%= row.TIPO_ID %>', '<%= row.LINEA %>', '<%= row.TRANSMISION_ID %>', '<%= row.PRECIO %>', '<%= row.ESTADO_V_ID %>', '<%= row.FECHA_INGRESO %>', '<%= row.NUM_MOTOR %>', '<%= row.TIPO_MOTOR_ID %>', '<%= row.CAPACIDAD %>', '<%= row.NUM_CILINDROS %>', '<%= row.NUM_PUERTAS %>', '<%= row.PROVEEDOR_ID_FK %>')"><i class="fa-solid fa-pen-to-square"></i></button>
                            </td>
                            <td class="no-border" style="text-align: center;">
                                <form action="/api/vehiculo/<%= row.ID_V %>/delete" method="POST" style="display:inline;">
                                    <input type="hidden" name="_method" value="DELETE">
                                    <button type="submit" class="table-button"><i class="fa-solid fa-trash"></i></button>
                                </form>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
        </div>

        <div class="form-container">
            <div class="card card-form">
                <h2>Agregar Vehículo</h2>
                <form action="/api/vehiculo" method="POST">
                    <div class="form-group">
                        <label for="id_v">ID_V:</label>
                        <input type="text" id="id_v" name="id_v" placeholder="ID_V" required>
                    </div>
                    <div class="form-group">
                        <label for="vin">VIN:</label>
                        <input type="text" id="vin" name="vin" placeholder="VIN" required>
                    </div>
                    <div class="form-group">
                        <label for="marca_id">Marca ID:</label>
                        <input type="text" id="marca_id" name="marca_id" placeholder="Marca ID" required>
                    </div>
                    <div class="form-group">
                        <label for="modelo_id">Modelo ID:</label>
                        <input type="text" id="modelo_id" name="modelo_id" placeholder="Modelo ID" required>
                    </div>
                    <div class="form-group">
                        <label for="anio">Año:</label>
                        <input type="text" id="anio" name="anio" placeholder="Año" required>
                    </div>
                    <div class="form-group">
                        <label for="color_id">Color ID:</label>
                        <input type="text" id="color_id" name="color_id" placeholder="Color ID" required>
                    </div>
                    <div class="form-group">
                        <label for="tipo_id">Tipo ID:</label>
                        <input type="text" id="tipo_id" name="tipo_id" placeholder="Tipo ID" required>
                    </div>
                    <div class="form-group">
                        <label for="linea">Línea:</label>
                        <input type="text" id="linea" name="linea" placeholder="Línea" required>
                    </div>
                    <div class="form-group">
                        <label for="transmision_id">Transmisión ID:</label>
                        <input type="text" id="transmision_id" name="transmision_id" placeholder="Transmisión ID" required>
                    </div>
                    <div class="form-group">
                        <label for="precio">Precio:</label>
                        <input type="text" id="precio" name="precio" placeholder="Precio" required>
                    </div>
                    <div class="form-group">
                        <label for="estado_v_id">Estado Vehículo ID:</label>
                        <input type="text" id="estado_v_id" name="estado_v_id" placeholder="Estado Vehículo ID" required>
                    </div>
                    <div class="form-group">
                        <label for="fecha_ingreso">Fecha Ingreso:</label>
                        <input type="date" id="fecha_ingreso" name="fecha_ingreso" placeholder="Fecha Ingreso" required>
                    </div>
                    <div class="form-group">
                        <label for="num_motor">Número Motor:</label>
                        <input type="text" id="num_motor" name="num_motor" placeholder="Número Motor" required>
                    </div>
                    <div class="form-group">
                        <label for="tipo_motor_id">Tipo Motor ID:</label>
                        <input type="text" id="tipo_motor_id" name="tipo_motor_id" placeholder="Tipo Motor ID" required>
                    </div>
                    <div class="form-group">
                        <label for="capacidad">Capacidad:</label>
                        <input type="text" id="capacidad" name="capacidad" placeholder="Capacidad" required>
                    </div>
                    <div class="form-group">
                        <label for="num_cilindros">Número Cilindros:</label>
                        <input type="text" id="num_cilindros" name="num_cilindros" placeholder="Número Cilindros" required>
                    </div>
                    <div class="form-group">
                        <label for="num_puertas">Número Puertas:</label>
                        <input type="text" id="num_puertas" name="num_puertas" placeholder="Número Puertas" required>
                    </div>
                    <div class="form-group">
                        <label for="proveedor_id_fk">Proveedor ID:</label>
                        <input type="text" id="proveedor_id_fk" name="proveedor_id_fk" placeholder="Proveedor ID" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Agregar</button>
                </form>
            </div>

            <div class="card card-form">
                <h2>Editar Vehículo</h2>
                <form id="editForm" action="/api/vehiculo/update" method="POST">
                    <input type="hidden" name="_method" value="PUT">
                    <div class="form-group">
                        <label for="edit_id_v">ID_V:</label>
                        <input type="text" id="edit_id_v" name="id_v" placeholder="ID_V" readonly>
                    </div>
                    <div class="form-group">
                        <label for="edit_vin">VIN:</label>
                        <input type="text" id="edit_vin" name="vin" placeholder="VIN" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_marca_id">Marca ID:</label>
                        <input type="text" id="edit_marca_id" name="marca_id" placeholder="Marca ID" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_modelo_id">Modelo ID:</label>
                        <input type="text" id="edit_modelo_id" name="modelo_id" placeholder="Modelo ID" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_anio">Año:</label>
                        <input type="text" id="edit_anio" name="anio" placeholder="Año" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_color_id">Color ID:</label>
                        <input type="text" id="edit_color_id" name="color_id" placeholder="Color ID" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_tipo_id">Tipo ID:</label>
                        <input type="text" id="edit_tipo_id" name="tipo_id" placeholder="Tipo ID" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_linea">Línea:</label>
                        <input type="text" id="edit_linea" name="linea" placeholder="Línea" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_transmision_id">Transmisión ID:</label>
                        <input type="text" id="edit_transmision_id" name="transmision_id" placeholder="Transmisión ID" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_precio">Precio:</label>
                        <input type="text" id="edit_precio" name="precio" placeholder="Precio" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_estado_v_id">Estado Vehículo ID:</label>
                        <input type="text" id="edit_estado_v_id" name="estado_v_id" placeholder="Estado Vehículo ID" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_fecha_ingreso">Fecha Ingreso:</label>
                        <input type="date" id="edit_fecha_ingreso" name="fecha_ingreso" placeholder="Fecha Ingreso" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_num_motor">Número Motor:</label>
                        <input type="text" id="edit_num_motor" name="num_motor" placeholder="Número Motor" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_tipo_motor_id">Tipo Motor ID:</label>
                        <input type="text" id="edit_tipo_motor_id" name="tipo_motor_id" placeholder="Tipo Motor ID" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_capacidad">Capacidad:</label>
                        <input type="text" id="edit_capacidad" name="capacidad" placeholder="Capacidad" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_num_cilindros">Número Cilindros:</label>
                        <input type="text" id="edit_num_cilindros" name="num_cilindros" placeholder="Número Cilindros" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_num_puertas">Número Puertas:</label>
                        <input type="text" id="edit_num_puertas" name="num_puertas" placeholder="Número Puertas" required>
                    </div>
                    <div class="form-group">
                        <label for="edit_proveedor_id_fk">Proveedor ID:</label>
                        <input type="text" id="edit_proveedor_id_fk" name="proveedor_id_fk" placeholder="Proveedor ID" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Editar</button>
                </form>
            </div>
        </div>
    </div>
    <script>
        function fillEditForm(id_v, vin, marca_id, modelo_id, anio, color_id, tipo_id, linea, transmision_id, precio, estado_v_id, fecha_ingreso, num_motor, tipo_motor_id, capacidad, num_cilindros, num_puertas, proveedor_id_fk) {
            document.getElementById('editForm').action = '/api/vehiculo/' + id_v + '/update';
            document.getElementById('edit_id_v').value = id_v;
            document.getElementById('edit_vin').value = vin;
            document.getElementById('edit_marca_id').value = marca_id;
            document.getElementById('edit_modelo_id').value = modelo_id;
            document.getElementById('edit_anio').value = anio;
            document.getElementById('edit_color_id').value = color_id;
            document.getElementById('edit_tipo_id').value = tipo_id;
            document.getElementById('edit_linea').value = linea;
            document.getElementById('edit_transmision_id').value = transmision_id;
            document.getElementById('edit_precio').value = precio;
            document.getElementById('edit_estado_v_id').value = estado_v_id;
            document.getElementById('edit_fecha_ingreso').value = fecha_ingreso;
            document.getElementById('edit_num_motor').value = num_motor;
            document.getElementById('edit_tipo_motor_id').value = tipo_motor_id;
            document.getElementById('edit_capacidad').value = capacidad;
            document.getElementById('edit_num_cilindros').value = num_cilindros;
            document.getElementById('edit_num_puertas').value = num_puertas;
            document.getElementById('edit_proveedor_id_fk').value = proveedor_id_fk;
        }
    </script>
</body>

</html>